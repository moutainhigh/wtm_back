<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0" name="viewport" />
    <title>邀请好友</title>
    <link href="../../code/css/base.css" rel="stylesheet" type="text/css"/>
    <link href="../../code/css/wapstyle.css" rel="stylesheet" type="text/css"/>
    <script src="../../code/js/wap/common.js"></script>
    <script>
        $(function(){
            $(".payconfirm").click(function(){
                location.href="../invite.html";
            })
            var inviteheight=$(window).height();
            var eventheight=$(".eventintroduce").height();
            $(".eventintroduce").css("top",inviteheight/2-eventheight/2);
            //弹窗遮罩效果
            $(".btonshare").click(function(){
                $("#cover").css("display","block");
                $(".eventintroduce").css("display","block");
                $(".nogo").css("height",inviteheight);
                $(".nogo").css("overflow","hidden");
                $(".payconfirm").attr("disabled","disabled");
            })
            var obj=document.getElementById("cover");
            obj.addEventListener("touchstart",function(e){
                $("#cover").css("display","none");
                $(".eventintroduce").css("display","none");
                $(".nogo").css("overflow","auto");
                $('.payconfirm').removeAttr("disabled");
            },false)
            $.cookie("memberId");
            $.ajax({
                type:'post',
                dataType:'json',
                url:'/pc/admin/memberInvited/getInvitedParamsDto',
                beforeSend: function (XMLHttpRequest) {
                    getMemberRequestHeaderMsg(XMLHttpRequest)
                },
                success:function(params){
                    var json=eval(params);
                    if(json.data!=null&&json.errorCode==0){
                        $(".invitedScore").text(json.data.invitedScore);
                        $("#totalScore").text(json.data.totalScore);
                    }else
                    {
                        alert("获取数据失败")
                    }
                },
                error:function (data) {
                    alert("页面加载错误，请重试");
                }
            })

            $.ajax({
                type:'post',
                dataType:'json',
                url:'/pc/admin/memberInvited/getTotalSharedMsg',
                beforeSend: function (XMLHttpRequest) {
                    getMemberRequestHeaderMsg(XMLHttpRequest)
                },
                success:function(params){
                    var json=eval(params);
                    if(json.data!=null&&json.errorCode==0){
                        var length=json.data.length;
                        if(length==1){
                            $("#Noone").css("display","table-cell");
                            $("#Noone img").attr("src",'http://weitaomi.b0.upaiyun.com'+json.data[0].imageUrl);
                            $("#Noone p").text(json.data[0].shareCounts+"米");
                            $("#Noone h6").text(json.data[0].memberName);
                        }else if(length==2){
                            $(".inviterank li:not('#Nothree')").css("display","table-cell");
                            for(var i=0;i<2;i++){
                                $(".inviterank li").eq(i).find('img').attr("src",'http://weitaomi.b0.upaiyun.com'+json.data[1-i].imageUrl);
                                $(".inviterank li").eq(i).find('p').text(json.data[1-i].shareCounts+"米");
                                $(".inviterank li").eq(i).find('h6').text(json.data[1-i].memberName);
                            }
                        }else{
                            $(".inviterank li").css("display","table-cell");
                            for(var i=0;i<3;i++){
                                $("#Noone img").attr("src",'http://weitaomi.b0.upaiyun.com'+json.data[1].imageUrl);
                                $("#Noone p").text(json.data[1].shareCounts+"米");
                                $("#Noone h6").text(json.data[1].memberName);
                                $("#Notwo img").attr("src",'http://weitaomi.b0.upaiyun.com'+json.data[0].imageUrl);
                                $("#Notwo p").text(json.data[0].shareCounts+"米");
                                $("#Notwo h6").text(json.data[0].memberName);
                                $("#Nothree img").attr("src",'http://weitaomi.b0.upaiyun.com'+json.data[2].imageUrl);
                                $("#Nothree p").text(json.data[2].shareCounts+"米");
                                $("#Nothree h6").text(json.data[2].memberName);
                            }
                            for(var j=3;j<length;j++){
                                var li=document.createElement('li');
                                var p=document.createElement('p');
                                var img=document.createElement('img');
                                var h5=document.createElement('h5');
                                var h6=document.createElement('h6');
                                li.appendChild(p);
                                li.appendChild(img);
                                li.appendChild(h5);
                                li.appendChild(h6);
                                document.body.appendChild(li);
                                document.getElementsByTagName('ul')[1].appendChild(li);
                                p.innerHTML="0"+(j+1);
                                img.setAttribute('src','http://weitaomi.b0.upaiyun.com'+json.data[j].imageUrl);
                                h6.innerHTML=json.data[j].shareCounts;
                                h5.innerHTML=json.data[j].memberName;
                            }
                        }
                    }else
                    {
                        alert("获取数据失败")
                    }
                },
                error:function (data) {
                    alert("页面加载错误，请重试");
                }
            })
            $("#inviterecord").click(function(){
                location.href="inviterecord.html";
            })
        })


    </script>
</head>
<body>
<div class="nogo">
<div class="dayinvite">
    <div class="daycode">
        <img src="../../code/img/invite/integral1.png"/>
        <h5>邀请码：<span>5JSPfR</span></h5>
        <p>（<span>！</span>点击邀请码复制到剪贴板）</p>
        <a class="btonshare">活动规则说明>></a>
    </div>
    <div class="dayrecord">
        <img src="../../code/img/invite/cutoff1.png"/>
            <div class="padding0">
                <h6>￥<span class="invitedScore"></span>米币</h6>
                <p>成功邀请就送<span class="invitedScore"></span>米币</p>
            </div>
            <div>
                <h6>%10奖励</h6>
                <p>成功邀请获取好友奖励的<span>10%</span></p>
            </div>
        <img src="../../code/img/invite/cutoff2.png"/>
<div class="abox">
    <input class="payconfirm" type="button" value="立即邀请马上领钱"/>
</div>
    </div>
</div>
<div class="inviteintroduce">
    <div>
        <h5 class="fl" style="background:url('../../code/img/invite/cup.png') no-repeat left center">我获得的奖励</h5>
        <a id="inviterecord">记录>></a>
    </div>
    <div class="totalbox">
        <h5 class="rewardmibi bg">累计获得<span id="totalScore"></span>米币</h5>
    </div>
    <div class="thissharebox">
        <h5 class="fl" style="background:url('../../code/img/invite/medal.png') no-repeat left center">本月分享达人</h5>
    </div>
<ul class="inviterank">
    <li id="Noone">
        <img src=""/>
        <p></p>
        <h6></h6>
    </li>
    <li id="Notwo">
        <img src=""/>
        <p></p>
        <h6></h6>
    </li>
    <li id="Nothree">
        <img src=""/>
        <p></p>
        <h6></h6>
    </li>
</ul>
    <ul class="inviterankxs">
    </ul>
</div>
<div id="cover"></div>
<div class="eventintroduce">
    <p><span>注：</span>（每一个APP用户都是一个业务代理，注册了APP之后平台会自动为用户生成一个代理二维码，
        用户可通过自己的二维码去邀请好友来下载APP赚钱，代理可以得到用户收入的提成（此提成由平台支付给用户）
    但是平台会对每一个代理有业务考核，如：上线代理完成的金额被下线超越，上线代理是收不到下线超额的提成，
        相反下线超额的部分会得到平台1.1倍的奖励，如果上线代理连续三个月被下线超越，上线将会被取消超额下线一方
    的代理权。）</p>
</div>
</div>
</body>
</html>